<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.f628065b851287e306e5.css" id="gatsby-global-css">@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:100;src:local("IBM Plex Sans Thin "),local("IBM Plex Sans-Thin"),url(/static/ibm-plex-sans-latin-100-245539db8ee56425757ef728eda8194e.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-100-9a582f3a304f421eca4027517706843c.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:100;src:local("IBM Plex Sans Thin italic"),local("IBM Plex Sans-Thinitalic"),url(/static/ibm-plex-sans-latin-100italic-3c34cf080b38f5fb1d4c59ffa45b3967.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-100italic-1ea7c5d21b5956b602bdf9656cfb353f.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:200;src:local("IBM Plex Sans Extra Light "),local("IBM Plex Sans-Extra Light"),url(/static/ibm-plex-sans-latin-200-bf72c8412ab06c393f52efc5beb26ea7.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-200-67524c36348a323f78f2845e3aafc2d4.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:200;src:local("IBM Plex Sans Extra Light italic"),local("IBM Plex Sans-Extra Lightitalic"),url(/static/ibm-plex-sans-latin-200italic-bbc2d55223638ce450424a917e1104b2.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-200italic-52df25607ec284ca361ae50ba24b3580.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:300;src:local("IBM Plex Sans Light "),local("IBM Plex Sans-Light"),url(/static/ibm-plex-sans-latin-300-9e1c48af24191f6ea8aede14957c5d01.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-300-10bb6a0ae6dc8000d999ab622a45e281.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:300;src:local("IBM Plex Sans Light italic"),local("IBM Plex Sans-Lightitalic"),url(/static/ibm-plex-sans-latin-300italic-c76f2ab53673e964b6e6734c1c455761.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-300italic-d3566d5bb4f31d86bfb9fda09563b416.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:400;src:local("IBM Plex Sans Regular "),local("IBM Plex Sans-Regular"),url(/static/ibm-plex-sans-latin-400-263d6267533501f58c33b12b382e3abb.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-400-a2c56f946488a9a267ba6ba21471a217.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:400;src:local("IBM Plex Sans Regular italic"),local("IBM Plex Sans-Regularitalic"),url(/static/ibm-plex-sans-latin-400italic-89a93a1bdde48c7bb104150de88affce.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-400italic-272f86114c980c52c131dfc3b4ae3276.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:500;src:local("IBM Plex Sans Medium "),local("IBM Plex Sans-Medium"),url(/static/ibm-plex-sans-latin-500-0866c24487514ad726738fb24f8e015b.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-500-f6d5c5d5b849796d6a8f5a2953b60753.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:500;src:local("IBM Plex Sans Medium italic"),local("IBM Plex Sans-Mediumitalic"),url(/static/ibm-plex-sans-latin-500italic-ffd12d59339823b8cf53b9f99b47d87c.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-500italic-ccd41bd1a5bfa8bad2cd8d35fdaeb3d1.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:600;src:local("IBM Plex Sans SemiBold "),local("IBM Plex Sans-SemiBold"),url(/static/ibm-plex-sans-latin-600-7852d4dc26ef44df58e23dc0b9722d6f.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-600-337b16517a230dc830b84dc6e6167b68.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:600;src:local("IBM Plex Sans SemiBold italic"),local("IBM Plex Sans-SemiBolditalic"),url(/static/ibm-plex-sans-latin-600italic-17e5379fd9a99b9bcb26ea983f391b6a.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-600italic-6f4ba6aa87fa99d5bc2b90a7b40a0ded.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:normal;font-display:swap;font-weight:700;src:local("IBM Plex Sans Bold "),local("IBM Plex Sans-Bold"),url(/static/ibm-plex-sans-latin-700-c9983d3d04f3ed6c2eafee1db1d24e06.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-700-b8809d619a33eb825b0450281ff752e7.woff) format("woff")}@font-face{font-family:IBM Plex Sans;font-style:italic;font-display:swap;font-weight:700;src:local("IBM Plex Sans Bold italic"),local("IBM Plex Sans-Bolditalic"),url(/static/ibm-plex-sans-latin-700italic-02954beec9e742bb1f3ae27b7e7cb71f.woff2) format("woff2"),url(/static/ibm-plex-sans-latin-700italic-72e9af409ddafc63a5dd380e34758560.woff) format("woff")}</style><meta name="generator" content="Gatsby 2.32.12"/><link rel="alternate" type="application/rss+xml" title="Minimal Blog - @lekoarts/gatsby-theme-minimal-blog" href="/rss.xml"/><title data-react-helmet="true">클로저 매크로에 대해 알아보자 | 그린랩스</title><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><meta data-react-helmet="true" name="description" content="그만 알아보자"/><meta data-react-helmet="true" name="image" content="https://green-labs.github.io/thumbnails/the-macro.png"/><meta data-react-helmet="true" property="og:title" content="클로저 매크로에 대해 알아보자"/><meta data-react-helmet="true" property="og:url" content="https://green-labs.github.io/the-macro"/><meta data-react-helmet="true" property="og:description" content="그만 알아보자"/><meta data-react-helmet="true" property="og:image" content="https://green-labs.github.io/thumbnails/the-macro.png"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:image:alt" content="그만 알아보자"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="클로저 매크로에 대해 알아보자"/><meta data-react-helmet="true" name="twitter:url" content="https://green-labs.github.io/the-macro"/><meta data-react-helmet="true" name="twitter:description" content="그만 알아보자"/><meta data-react-helmet="true" name="twitter:image" content="https://green-labs.github.io/thumbnails/the-macro.png"/><meta data-react-helmet="true" name="twitter:image:alt" content="그만 알아보자"/><meta data-react-helmet="true" name="twitter:creator" content="그린랩스"/><meta data-react-helmet="true" name="gatsby-theme" content="@lekoarts/gatsby-theme-minimal-blog"/><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#29c389"/><link rel="apple-touch-icon" sizes="192x192" href="/android-chrome-192x192.png"/><link rel="apple-touch-icon" sizes="512x512" href="/android-chrome-512x512.png"/><link as="script" rel="preload" href="/webpack-runtime-14c9fe1a26c0af28d845.js"/><link as="script" rel="preload" href="/framework-cd3e1e804d552fa282ef.js"/><link as="script" rel="preload" href="/app-6eb8c76412b9441ee715.js"/><link as="script" rel="preload" href="/styles-e9d24b1846c7d6eb9685.js"/><link as="script" rel="preload" href="/a762775feeb6986a7626165c092554dd56475b59-fe7bde6fd61e84b9dfa4.js"/><link as="script" rel="preload" href="/component---src-lekoarts-gatsby-theme-minimal-blog-core-templates-post-query-tsx-91bb4cd3b6293ecc9d55.js"/><link as="fetch" rel="preload" href="/page-data/the-macro/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3090400250.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/3090400250.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/318001574.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.body.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="16ql9gk">body{--theme-ui-colors-transparent:var(--theme-ui-colors-transparent,transparent);--theme-ui-colors-black:var(--theme-ui-colors-black,#000);--theme-ui-colors-white:var(--theme-ui-colors-white,#fff);--theme-ui-colors-gray-0:var(--theme-ui-colors-gray-0,null);--theme-ui-colors-gray-1:var(--theme-ui-colors-gray-1,#f7fafc);--theme-ui-colors-gray-2:var(--theme-ui-colors-gray-2,#edf2f7);--theme-ui-colors-gray-3:var(--theme-ui-colors-gray-3,#e2e8f0);--theme-ui-colors-gray-4:var(--theme-ui-colors-gray-4,#cbd5e0);--theme-ui-colors-gray-5:var(--theme-ui-colors-gray-5,#a0aec0);--theme-ui-colors-gray-6:var(--theme-ui-colors-gray-6,#718096);--theme-ui-colors-gray-7:var(--theme-ui-colors-gray-7,#4a5568);--theme-ui-colors-gray-8:var(--theme-ui-colors-gray-8,#2d3748);--theme-ui-colors-gray-9:var(--theme-ui-colors-gray-9,#1a202c);--theme-ui-colors-red-0:var(--theme-ui-colors-red-0,null);--theme-ui-colors-red-1:var(--theme-ui-colors-red-1,#fff5f5);--theme-ui-colors-red-2:var(--theme-ui-colors-red-2,#fed7d7);--theme-ui-colors-red-3:var(--theme-ui-colors-red-3,#feb2b2);--theme-ui-colors-red-4:var(--theme-ui-colors-red-4,#fc8181);--theme-ui-colors-red-5:var(--theme-ui-colors-red-5,#f56565);--theme-ui-colors-red-6:var(--theme-ui-colors-red-6,#e53e3e);--theme-ui-colors-red-7:var(--theme-ui-colors-red-7,#c53030);--theme-ui-colors-red-8:var(--theme-ui-colors-red-8,#9b2c2c);--theme-ui-colors-red-9:var(--theme-ui-colors-red-9,#742a2a);--theme-ui-colors-orange-0:var(--theme-ui-colors-orange-0,null);--theme-ui-colors-orange-1:var(--theme-ui-colors-orange-1,#fffaf0);--theme-ui-colors-orange-2:var(--theme-ui-colors-orange-2,#feebc8);--theme-ui-colors-orange-3:var(--theme-ui-colors-orange-3,#fbd38d);--theme-ui-colors-orange-4:var(--theme-ui-colors-orange-4,#f6ad55);--theme-ui-colors-orange-5:var(--theme-ui-colors-orange-5,#ed8936);--theme-ui-colors-orange-6:var(--theme-ui-colors-orange-6,#dd6b20);--theme-ui-colors-orange-7:var(--theme-ui-colors-orange-7,#c05621);--theme-ui-colors-orange-8:var(--theme-ui-colors-orange-8,#9c4221);--theme-ui-colors-orange-9:var(--theme-ui-colors-orange-9,#7b341e);--theme-ui-colors-yellow-0:var(--theme-ui-colors-yellow-0,null);--theme-ui-colors-yellow-1:var(--theme-ui-colors-yellow-1,#fffff0);--theme-ui-colors-yellow-2:var(--theme-ui-colors-yellow-2,#fefcbf);--theme-ui-colors-yellow-3:var(--theme-ui-colors-yellow-3,#faf089);--theme-ui-colors-yellow-4:var(--theme-ui-colors-yellow-4,#f6e05e);--theme-ui-colors-yellow-5:var(--theme-ui-colors-yellow-5,#ecc94b);--theme-ui-colors-yellow-6:var(--theme-ui-colors-yellow-6,#d69e2e);--theme-ui-colors-yellow-7:var(--theme-ui-colors-yellow-7,#b7791f);--theme-ui-colors-yellow-8:var(--theme-ui-colors-yellow-8,#975a16);--theme-ui-colors-yellow-9:var(--theme-ui-colors-yellow-9,#744210);--theme-ui-colors-green-0:var(--theme-ui-colors-green-0,null);--theme-ui-colors-green-1:var(--theme-ui-colors-green-1,#f0fff4);--theme-ui-colors-green-2:var(--theme-ui-colors-green-2,#c6f6d5);--theme-ui-colors-green-3:var(--theme-ui-colors-green-3,#9ae6b4);--theme-ui-colors-green-4:var(--theme-ui-colors-green-4,#68d391);--theme-ui-colors-green-5:var(--theme-ui-colors-green-5,#48bb78);--theme-ui-colors-green-6:var(--theme-ui-colors-green-6,#38a169);--theme-ui-colors-green-7:var(--theme-ui-colors-green-7,#2f855a);--theme-ui-colors-green-8:var(--theme-ui-colors-green-8,#276749);--theme-ui-colors-green-9:var(--theme-ui-colors-green-9,#22543d);--theme-ui-colors-teal-0:var(--theme-ui-colors-teal-0,null);--theme-ui-colors-teal-1:var(--theme-ui-colors-teal-1,#e6fffa);--theme-ui-colors-teal-2:var(--theme-ui-colors-teal-2,#b2f5ea);--theme-ui-colors-teal-3:var(--theme-ui-colors-teal-3,#81e6d9);--theme-ui-colors-teal-4:var(--theme-ui-colors-teal-4,#4fd1c5);--theme-ui-colors-teal-5:var(--theme-ui-colors-teal-5,#38b2ac);--theme-ui-colors-teal-6:var(--theme-ui-colors-teal-6,#319795);--theme-ui-colors-teal-7:var(--theme-ui-colors-teal-7,#2c7a7b);--theme-ui-colors-teal-8:var(--theme-ui-colors-teal-8,#285e61);--theme-ui-colors-teal-9:var(--theme-ui-colors-teal-9,#234e52);--theme-ui-colors-blue-0:var(--theme-ui-colors-blue-0,null);--theme-ui-colors-blue-1:var(--theme-ui-colors-blue-1,#ebf8ff);--theme-ui-colors-blue-2:var(--theme-ui-colors-blue-2,#bee3f8);--theme-ui-colors-blue-3:var(--theme-ui-colors-blue-3,#90cdf4);--theme-ui-colors-blue-4:var(--theme-ui-colors-blue-4,#63b3ed);--theme-ui-colors-blue-5:var(--theme-ui-colors-blue-5,#4299e1);--theme-ui-colors-blue-6:var(--theme-ui-colors-blue-6,#3182ce);--theme-ui-colors-blue-7:var(--theme-ui-colors-blue-7,#2b6cb0);--theme-ui-colors-blue-8:var(--theme-ui-colors-blue-8,#2c5282);--theme-ui-colors-blue-9:var(--theme-ui-colors-blue-9,#2a4365);--theme-ui-colors-indigo-0:var(--theme-ui-colors-indigo-0,null);--theme-ui-colors-indigo-1:var(--theme-ui-colors-indigo-1,#ebf4ff);--theme-ui-colors-indigo-2:var(--theme-ui-colors-indigo-2,#c3dafe);--theme-ui-colors-indigo-3:var(--theme-ui-colors-indigo-3,#a3bffa);--theme-ui-colors-indigo-4:var(--theme-ui-colors-indigo-4,#7f9cf5);--theme-ui-colors-indigo-5:var(--theme-ui-colors-indigo-5,#667eea);--theme-ui-colors-indigo-6:var(--theme-ui-colors-indigo-6,#5a67d8);--theme-ui-colors-indigo-7:var(--theme-ui-colors-indigo-7,#4c51bf);--theme-ui-colors-indigo-8:var(--theme-ui-colors-indigo-8,#434190);--theme-ui-colors-indigo-9:var(--theme-ui-colors-indigo-9,#3c366b);--theme-ui-colors-purple-0:var(--theme-ui-colors-purple-0,null);--theme-ui-colors-purple-1:var(--theme-ui-colors-purple-1,#faf5ff);--theme-ui-colors-purple-2:var(--theme-ui-colors-purple-2,#e9d8fd);--theme-ui-colors-purple-3:var(--theme-ui-colors-purple-3,#d6bcfa);--theme-ui-colors-purple-4:var(--theme-ui-colors-purple-4,#b794f4);--theme-ui-colors-purple-5:var(--theme-ui-colors-purple-5,#9f7aea);--theme-ui-colors-purple-6:var(--theme-ui-colors-purple-6,#805ad5);--theme-ui-colors-purple-7:var(--theme-ui-colors-purple-7,#6b46c1);--theme-ui-colors-purple-8:var(--theme-ui-colors-purple-8,#553c9a);--theme-ui-colors-purple-9:var(--theme-ui-colors-purple-9,#44337a);--theme-ui-colors-pink-0:var(--theme-ui-colors-pink-0,null);--theme-ui-colors-pink-1:var(--theme-ui-colors-pink-1,#fff5f7);--theme-ui-colors-pink-2:var(--theme-ui-colors-pink-2,#fed7e2);--theme-ui-colors-pink-3:var(--theme-ui-colors-pink-3,#fbb6ce);--theme-ui-colors-pink-4:var(--theme-ui-colors-pink-4,#f687b3);--theme-ui-colors-pink-5:var(--theme-ui-colors-pink-5,#ed64a6);--theme-ui-colors-pink-6:var(--theme-ui-colors-pink-6,#d53f8c);--theme-ui-colors-pink-7:var(--theme-ui-colors-pink-7,#b83280);--theme-ui-colors-pink-8:var(--theme-ui-colors-pink-8,#97266d);--theme-ui-colors-pink-9:var(--theme-ui-colors-pink-9,#702459);--theme-ui-colors-grayDark:var(--theme-ui-colors-grayDark,#2d3748);--theme-ui-colors-text:var(--theme-ui-colors-text,#2d3748);--theme-ui-colors-background:var(--theme-ui-colors-background,#fff);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#2f855a);--theme-ui-colors-primaryHover:var(--theme-ui-colors-primaryHover,#2c5282);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#5f6c80);--theme-ui-colors-muted:var(--theme-ui-colors-muted,#e2e8f0);--theme-ui-colors-success:var(--theme-ui-colors-success,#9ae6b4);--theme-ui-colors-info:var(--theme-ui-colors-info,#63b3ed);--theme-ui-colors-warning:var(--theme-ui-colors-warning,#faf089);--theme-ui-colors-danger:var(--theme-ui-colors-danger,#feb2b2);--theme-ui-colors-light:var(--theme-ui-colors-light,#f7fafc);--theme-ui-colors-dark:var(--theme-ui-colors-dark,#2d3748);--theme-ui-colors-textMuted:var(--theme-ui-colors-textMuted,#718096);--theme-ui-colors-toggleIcon:var(--theme-ui-colors-toggleIcon,#2d3748);--theme-ui-colors-heading:var(--theme-ui-colors-heading,#000);--theme-ui-colors-divide:var(--theme-ui-colors-divide,#cbd5e0);--theme-ui-colors-backtick:var(--theme-ui-colors-backtick,#2d3748);--theme-ui-colors-backtickBg:var(--theme-ui-colors-backtickBg,#edf2f7);color:var(--theme-ui-colors-text,#2d3748);background-color:var(--theme-ui-colors-background,#fff);}body.theme-ui-dark{--theme-ui-colors-text:var(--theme-ui-colors-modes-dark-text,#cbd5e0);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#48bb78);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,#7f8ea3);--theme-ui-colors-toggleIcon:var(--theme-ui-colors-modes-dark-toggleIcon,#cbd5e0);--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#1A202C);--theme-ui-colors-heading:var(--theme-ui-colors-modes-dark-heading,#fff);--theme-ui-colors-divide:var(--theme-ui-colors-modes-dark-divide,#2d3748);--theme-ui-colors-muted:var(--theme-ui-colors-modes-dark-muted,#2d3748);--theme-ui-colors-backtick:var(--theme-ui-colors-modes-dark-backtick,#edf2f7);--theme-ui-colors-backtickBg:var(--theme-ui-colors-modes-dark-backtickBg,#2d3748);}</style><style data-emotion-css="tm2q0o">*{box-sizing:border-box;}body{margin:0;font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.625;font-weight:400;color:var(--theme-ui-colors-text,#2d3748);background-color:var(--theme-ui-colors-background,#fff);padding:0;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="kcr4c7">*{box-sizing:inherit;}html{-webkit-text-size-adjust:100%;}img{border-style:none;}pre{font-family:monospace;font-size:1em;}[hidden]{display:none;}::selection{background-color:var(--theme-ui-colors-text,#2d3748);color:var(--theme-ui-colors-background,#fff);}a{-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;color:text;}</style><style data-emotion-css="1g597hz">.css-1g597hz{border:0;-webkit-clip:react(0 0 0 0);clip:react(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute;}.css-1g597hz:focus{padding:1rem;position:fixed;top:15px;left:15px;background-color:var(--theme-ui-colors-heading,#000);color:var(--theme-ui-colors-background,#fff);z-index:1;width:auto;height:auto;-webkit-clip:auto;clip:auto;-webkit-text-decoration:none;text-decoration:none;}</style><a href="#skip-nav" data-skip-link="true" class="css-1g597hz">Skip to content</a><style data-emotion-css="157bhr3">.css-157bhr3{box-sizing:border-box;margin:0;min-width:0;width:100%;max-width:container;margin-left:auto;margin-right:auto;padding:1rem;max-width:740px;}@media screen and (min-width:640px){.css-157bhr3{padding:2rem;}}</style><div style="padding:1em" class="css-157bhr3"><style data-emotion-css="r5barg">.css-r5barg{margin-bottom:0.5rem;}@media screen and (min-width:640px){.css-r5barg{margin-bottom:1rem;}}</style><header class="css-r5barg"><style data-emotion-css="1eswzqe">.css-1eswzqe{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><style data-emotion-css="190uhut">.css-190uhut{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-190uhut"><style data-emotion-css="dz3ojy">.css-dz3ojy{color:var(--theme-ui-colors-heading,#000);-webkit-text-decoration:none;text-decoration:none;}</style><a aria-label="그린랩스 - 홈으로 돌아가기" class="css-dz3ojy" href="/"><style data-emotion-css="1kmktz0">.css-1kmktz0{margin-top:0;margin-bottom:0;font-weight:500;font-size:1.5rem;}@media screen and (min-width:640px){.css-1kmktz0{font-size:1.875rem;}}</style><div style="display:flex;align-items:center;flex-wrap:wrap" class="css-1kmktz0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200" width="35" height="35" class="logo"><style>.logo_svg__st17{fill:#3bbd5a}</style><g id="logo_svg__\uB808\uC774\uC5B4_1"><path fill="#009943" d="M149.74 140.97l-34.8-71.71-2.48-5.11-19.89-40.99H57.78l22.37 46.1 17.39 35.86 19.88 40.98 14.91 30.73h.01l14.91-30.73h4.98z"></path><path class="logo_svg__st17" d="M67.72 94.87l-39.77 81.97h34.81l29.99-61.72-17.4-35.86zM177.36 146.1h-30.11l-14.91 30.73h34.8l10.22-21.07 4.69-9.66zM57.78 23.16l-14.9 30.72h34.79l14.9-30.72z"></path></g></svg><span style="margin-left:6px;font-size:1.2rem;font-weight:normal">그린랩스</span><span style="margin-left:6px;font-size:1.2rem;font-weight:bolder">기술 블로그</span></div></a><style data-emotion-css="af3ja4">.css-af3ja4{opacity:0.65;position:relative;border-radius:5px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;border:none;outline:none;background:none;cursor:pointer;padding:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;}.css-af3ja4:hover,.css-af3ja4:focus{opacity:1;}</style><button type="button" aria-label="Activate Dark Mode" title="Activate Dark Mode" class="css-af3ja4"><style data-emotion-css="iiu7h7">.css-iiu7h7{position:relative;width:24px;height:24px;border-radius:50%;border:none;background-color:var(--theme-ui-colors-transparent,transparent);-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1);-webkit-transition:all 0.45s ease;transition:all 0.45s ease;overflow:hidden;box-shadow:inset 8px -8px 0px 0px var(--theme-ui-colors-toggleIcon,#2d3748);}.css-iiu7h7:before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;border:none;border-radius:50%;-webkit-transform:translate(0,0);-ms-transform:translate(0,0);transform:translate(0,0);opacity:1;-webkit-transition:-webkit-transform 0.45s ease;-webkit-transition:transform 0.45s ease;transition:transform 0.45s ease;}.css-iiu7h7:after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0 0 -4px;position:absolute;top:50%;left:50%;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon,#2d3748),0 23px 0 var(--theme-ui-colors-toggleIcon,#2d3748),23px 0 0 var(--theme-ui-colors-toggleIcon,#2d3748),-23px 0 0 var(--theme-ui-colors-toggleIcon,#2d3748),15px 15px 0 var(--theme-ui-colors-toggleIcon,#2d3748),-15px 15px 0 var(--theme-ui-colors-toggleIcon,#2d3748),15px -15px 0 var(--theme-ui-colors-toggleIcon,#2d3748),-15px -15px 0 var(--theme-ui-colors-toggleIcon,#2d3748);-webkit-transform:scale(0);-ms-transform:scale(0);transform:scale(0);-webkit-transition:all 0.35s ease;transition:all 0.35s ease;}</style><div class="css-iiu7h7"></div></button></div></header><style data-emotion-css="mt6dwb">.css-mt6dwb [data-name='live-editor']{font-size:1rem;}.css-mt6dwb [data-name='live-editor'] textarea,.css-mt6dwb [data-name='live-editor'] pre{padding:1rem !important;}.css-mt6dwb [data-name='live-preview']{padding:calc(0.5rem + 10px) !important;background-color:#c0dacd;}.css-mt6dwb .prism-code{font-size:1rem;padding:2rem 1rem 1rem 1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent,transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width:640px){.css-mt6dwb .prism-code{font-size:1rem;}}@media screen and (min-width:768px){.css-mt6dwb .prism-code{font-size:1rem;}}.css-mt6dwb .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-mt6dwb .gatsby-highlight[data-language=''] .prism-code,.css-mt6dwb .gatsby-highlight[data-language='noLineNumbers'] .prism-code{padding-top:1rem;}.css-mt6dwb .token{display:inline-block;}.css-mt6dwb .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;background-color:rgb(1,22,39);border-radius:2px;margin-left:0;margin-right:0;}@media screen and (min-width:640px){.css-mt6dwb .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width:768px){.css-mt6dwb .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width:1024px){.css-mt6dwb .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-mt6dwb .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-mt6dwb .gatsby-highlight pre code{float:left;min-width:100%;}.css-mt6dwb .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white,#fff);border-radius:0 0 0.25rem 0.25rem;color:var(--theme-ui-colors-black,#000);font-size:12px;-webkit-letter-spacing:0.025rem;-moz-letter-spacing:0.025rem;-ms-letter-spacing:0.025rem;letter-spacing:0.025rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;top:0;}.css-mt6dwb .gatsby-highlight pre[class~="language-javascript"]:before,.css-mt6dwb .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black,#000);}.css-mt6dwb .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-mt6dwb .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-mt6dwb .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-mt6dwb .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-mt6dwb .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-mt6dwb .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-mt6dwb .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-mt6dwb .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black,#000);}.css-mt6dwb .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black,#000);}.css-mt6dwb .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black,#000);}.css-mt6dwb .gatsby-highlight pre[class~="language-py"]:before,.css-mt6dwb .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white,#fff);}.css-mt6dwb .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-mt6dwb .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-mt6dwb .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-mt6dwb .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-mt6dwb .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-mt6dwb .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-mt6dwb .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-mt6dwb .gatsby-highlight pre[class~='language-json']:before,.css-mt6dwb .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-mt6dwb .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-mt6dwb .gatsby-highlight > code[class*="language-"],.css-mt6dwb .gatsby-highlight > pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-mt6dwb .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-mt6dwb .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary,#2f855a);}.css-mt6dwb .gatsby-highlight pre::-webkit-scrollbar-track{background:rgb(1,22,39);}.css-mt6dwb .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-mt6dwb .code-title{background-color:#c0dacd;color:var(--theme-ui-colors-black,#000);font-size:0.875rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;margin-left:0;margin-right:0;}@media screen and (min-width:640px){.css-mt6dwb .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width:768px){.css-mt6dwb .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width:1024px){.css-mt6dwb .code-title{margin-left:-1rem;margin-right:-1rem;}}.css-mt6dwb [data-name='live-preview'],.css-mt6dwb [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}@media screen and (min-width:640px){.css-mt6dwb [data-name='live-preview'],.css-mt6dwb [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}}@media screen and (min-width:768px){.css-mt6dwb [data-name='live-preview'],.css-mt6dwb [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1.25rem;}}@media screen and (min-width:1024px){.css-mt6dwb [data-name='live-preview'],.css-mt6dwb [data-name='live-editor']{margin-left:-1rem;margin-right:-1rem;}}.css-mt6dwb .token-line{padding-right:1rem;}.css-mt6dwb .highlight-line{background-color:rgb(2,55,81);border-left:4px solid rgb(2,155,206);}.css-mt6dwb .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-mt6dwb .react-live-wrapper{position:relative;}.css-mt6dwb .react-live-wrapper .code-copy-button{right:0;}@media screen and (min-width:640px){.css-mt6dwb .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width:768px){.css-mt6dwb .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width:1024px){.css-mt6dwb .react-live-wrapper .code-copy-button{right:-1rem;}}.css-mt6dwb *{word-break:keep-all;word-wrap:break-word;}.css-mt6dwb a{font-weight:700;}.css-mt6dwb p{word-break:keep-all !important;}.css-mt6dwb span{word-break:keep-all !important;}.css-mt6dwb code span{font-size:16px !important;line-height:1rem !important;}.css-mt6dwb pre[class~="language-reason"]:before{content:"reasonml";background:#e6484f !important;color:white !important;font-weight:700;}.css-mt6dwb pre[class~="language-rescript"]:before{content:"rescript";background:rgba(230,72,79,1) !important;color:white !important;font-weight:700;}.css-mt6dwb pre[class~="language-haskell"]:before{content:"haskell";background:#5e4f85 !important;color:white !important;font-weight:700;}.css-mt6dwb pre[class~="language-java"]:before{content:"java";background:#e76f00 !important;color:white !important;font-weight:700;}.css-mt6dwb pre[class~="language-clojure"]:before{content:"clojure";background:#5881d8 !important;color:white !important;font-weight:700;}.css-mt6dwb .gatsby-resp-image-wrapper{box-shadow:none !important;margin-top:2rem !important;}</style><style data-emotion-css="1snt6vb">.css-1snt6vb{box-sizing:border-box;margin:0;min-width:0;}.css-1snt6vb [data-name='live-editor']{font-size:1rem;}.css-1snt6vb [data-name='live-editor'] textarea,.css-1snt6vb [data-name='live-editor'] pre{padding:1rem !important;}.css-1snt6vb [data-name='live-preview']{padding:calc(0.5rem + 10px) !important;background-color:#c0dacd;}.css-1snt6vb .prism-code{font-size:1rem;padding:2rem 1rem 1rem 1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent,transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width:640px){.css-1snt6vb .prism-code{font-size:1rem;}}@media screen and (min-width:768px){.css-1snt6vb .prism-code{font-size:1rem;}}.css-1snt6vb .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-1snt6vb .gatsby-highlight[data-language=''] .prism-code,.css-1snt6vb .gatsby-highlight[data-language='noLineNumbers'] .prism-code{padding-top:1rem;}.css-1snt6vb .token{display:inline-block;}.css-1snt6vb .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;background-color:rgb(1,22,39);border-radius:2px;margin-left:0;margin-right:0;}@media screen and (min-width:640px){.css-1snt6vb .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width:768px){.css-1snt6vb .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width:1024px){.css-1snt6vb .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-1snt6vb .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-1snt6vb .gatsby-highlight pre code{float:left;min-width:100%;}.css-1snt6vb .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white,#fff);border-radius:0 0 0.25rem 0.25rem;color:var(--theme-ui-colors-black,#000);font-size:12px;-webkit-letter-spacing:0.025rem;-moz-letter-spacing:0.025rem;-ms-letter-spacing:0.025rem;letter-spacing:0.025rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;top:0;}.css-1snt6vb .gatsby-highlight pre[class~="language-javascript"]:before,.css-1snt6vb .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black,#000);}.css-1snt6vb .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-1snt6vb .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-1snt6vb .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black,#000);}.css-1snt6vb .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-1snt6vb .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-1snt6vb .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white,#fff);}.css-1snt6vb .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-1snt6vb .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black,#000);}.css-1snt6vb .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black,#000);}.css-1snt6vb .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black,#000);}.css-1snt6vb .gatsby-highlight pre[class~="language-py"]:before,.css-1snt6vb .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white,#fff);}.css-1snt6vb .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-1snt6vb .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-1snt6vb .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-1snt6vb .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-1snt6vb .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-1snt6vb .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-1snt6vb .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-1snt6vb .gatsby-highlight pre[class~='language-json']:before,.css-1snt6vb .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-1snt6vb .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-1snt6vb .gatsby-highlight > code[class*="language-"],.css-1snt6vb .gatsby-highlight > pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1snt6vb .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-1snt6vb .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary,#2f855a);}.css-1snt6vb .gatsby-highlight pre::-webkit-scrollbar-track{background:rgb(1,22,39);}.css-1snt6vb .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-1snt6vb .code-title{background-color:#c0dacd;color:var(--theme-ui-colors-black,#000);font-size:0.875rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;margin-left:0;margin-right:0;}@media screen and (min-width:640px){.css-1snt6vb .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width:768px){.css-1snt6vb .code-title{margin-left:0;margin-right:0;}}@media screen and (min-width:1024px){.css-1snt6vb .code-title{margin-left:-1rem;margin-right:-1rem;}}.css-1snt6vb [data-name='live-preview'],.css-1snt6vb [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}@media screen and (min-width:640px){.css-1snt6vb [data-name='live-preview'],.css-1snt6vb [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1rem;}}@media screen and (min-width:768px){.css-1snt6vb [data-name='live-preview'],.css-1snt6vb [data-name='live-editor']{margin-left:0;margin-right:0;font-size:1.25rem;}}@media screen and (min-width:1024px){.css-1snt6vb [data-name='live-preview'],.css-1snt6vb [data-name='live-editor']{margin-left:-1rem;margin-right:-1rem;}}.css-1snt6vb .token-line{padding-right:1rem;}.css-1snt6vb .highlight-line{background-color:rgb(2,55,81);border-left:4px solid rgb(2,155,206);}.css-1snt6vb .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}.css-1snt6vb .react-live-wrapper{position:relative;}.css-1snt6vb .react-live-wrapper .code-copy-button{right:0;}@media screen and (min-width:640px){.css-1snt6vb .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width:768px){.css-1snt6vb .react-live-wrapper .code-copy-button{right:0;}}@media screen and (min-width:1024px){.css-1snt6vb .react-live-wrapper .code-copy-button{right:-1rem;}}.css-1snt6vb *{word-break:keep-all;word-wrap:break-word;}.css-1snt6vb a{font-weight:700;}.css-1snt6vb p{word-break:keep-all !important;}.css-1snt6vb span{word-break:keep-all !important;}.css-1snt6vb code span{font-size:16px !important;line-height:1rem !important;}.css-1snt6vb pre[class~="language-reason"]:before{content:"reasonml";background:#e6484f !important;color:white !important;font-weight:700;}.css-1snt6vb pre[class~="language-rescript"]:before{content:"rescript";background:rgba(230,72,79,1) !important;color:white !important;font-weight:700;}.css-1snt6vb pre[class~="language-haskell"]:before{content:"haskell";background:#5e4f85 !important;color:white !important;font-weight:700;}.css-1snt6vb pre[class~="language-java"]:before{content:"java";background:#e76f00 !important;color:white !important;font-weight:700;}.css-1snt6vb pre[class~="language-clojure"]:before{content:"clojure";background:#5881d8 !important;color:white !important;font-weight:700;}.css-1snt6vb .gatsby-resp-image-wrapper{box-shadow:none !important;margin-top:2rem !important;}</style><div id="skip-nav" class=" css-1snt6vb"><style data-emotion-css="8o4giv">.css-8o4giv{box-sizing:border-box;margin:0;min-width:0;font-family:inherit;font-weight:700;line-height:1.25;font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:3rem;margin-top:2rem;color:var(--theme-ui-colors-heading,#000);}</style><h1 style="font-size:36px" class="css-8o4giv">클로저 매크로에 대해 알아보자</h1><style data-emotion-css="1fkzbc2">.css-1fkzbc2{color:var(--theme-ui-colors-secondary,#5f6c80);margin-top:1rem;font-size:1rem;}.css-1fkzbc2 a{color:var(--theme-ui-colors-secondary,#5f6c80);}@media screen and (min-width:640px){.css-1fkzbc2{font-size:1rem;}}@media screen and (min-width:768px){.css-1fkzbc2{font-size:1.25rem;}}</style><p class="css-1fkzbc2"><time>2021년 11월 22일</time> — <span>4<!-- --> min read</span></p><style data-emotion-css="f0b8g7">.css-f0b8g7{margin-top:4rem;margin-bottom:4rem;}.css-f0b8g7 .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;box-shadow:rgba(0,0,0,0.15) 0px 32px 32px 0px,rgba(0,0,0,0.15) 0px 16px 16px 0px,rgba(0,0,0,0.15) 0px 8px 8px 0px,rgba(0,0,0,0.15) 0px 4px 4px 0px;}@media screen and (min-width:640px){.css-f0b8g7 .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;}}@media screen and (min-width:768px){.css-f0b8g7 .gatsby-resp-image-wrapper{margin-top:4rem;margin-bottom:4rem;}}</style><section class="css-f0b8g7"><style data-emotion-css="1k3503y">.css-1k3503y{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:4rem;color:var(--theme-ui-colors-heading,#000);}@media screen and (min-width:640px){.css-1k3503y{font-size:1.875rem;}}@media screen and (min-width:768px){.css-1k3503y{font-size:1.875rem;}}@media screen and (min-width:1024px){.css-1k3503y{font-size:1.875rem;}}</style><h2 class="css-1k3503y">매크로에 대한 기억</h2><style data-emotion-css="64lq4m">.css-64lq4m{font-size:1rem;-webkit-letter-spacing:-0.003em;-moz-letter-spacing:-0.003em;-ms-letter-spacing:-0.003em;letter-spacing:-0.003em;line-height:1.8rem;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width:640px){.css-64lq4m{font-size:1rem;}}@media screen and (min-width:768px){.css-64lq4m{font-size:16px;}}.css-64lq4m > code{color:var(--theme-ui-colors-backtick,#2d3748);background-color:var(--theme-ui-colors-backtickBg,#edf2f7);padding-left:0.25rem;padding-right:0.25rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:2px;}</style><p class="css-64lq4m">어린 시절 즐기던 게임에서는 레벨 업을 위해 지루한 반복 사냥을 해야 할 때가 많았습니다. 제 친구 중 몇 명은 매크로 프로그램을 이용해 반복 사냥을 컴퓨터가 대신하게 했습니다. 매크로를 이용하면 캐릭터가 어떤 방향으로 공격을 하게 하거나, 몇 분에 한 번씩 아이템을 사용하도록 하는 등 일련의 작업을 자동으로 실행할 수 있었습니다. 이처럼, &#x27;매크로&#x27;란 미리 정해놓은 명령을 자동으로 실행하여 단순 반복 작업을 줄이는 기능입니다. 그런데 프로그래밍에서도 따분한 반복 작업을 해야 하는 경우가 있습니다. 프로그래밍 언어에는 일정한 문법과 규칙이 있기 때문입니다. 예를 들어, 자바에서 새 객체를 만들려면 다음과 같은 절차를 반드시 따라야 합니다.</p><style data-emotion-css="13z3j25">.css-13z3j25 li{font-size:16px;-webkit-letter-spacing:-0.003em;-moz-letter-spacing:-0.003em;-ms-letter-spacing:-0.003em;letter-spacing:-0.003em;line-height:1.8rem;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}.css-13z3j25 li > code{color:var(--theme-ui-colors-backtick,#2d3748);background-color:var(--theme-ui-colors-backtickBg,#edf2f7);padding-left:0.25rem;padding-right:0.25rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:2px;}</style><ol class="css-13z3j25"><li class="css-0"><code class="css-0">class</code> 키워드로 클래스를 정의한다.</li><li class="css-0"><code class="css-0">new</code> 키워드로 객체를 생성한다.</li></ol><p class="css-64lq4m">이 두 문장은 뒤바뀔 수 없습니다. 둘 중 하나의 행위만으로는 객체를 만들 수 없죠. 프로그래밍 언어의 문법의 틀을 당연시한다면 생각은 그와 유사한 방식으로만 상상할 수밖에 없다고 생각합니다. 클로저(Clojure)의 매크로는 주어진 규칙을 허무는 데 도움을 줄 것입니다.</p><h2 class="css-1k3503y">프로그래밍 언어의 매크로</h2><style data-emotion-css="k3mtc7">.css-k3mtc7{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading,#000);}@media screen and (min-width:640px){.css-k3mtc7{font-size:1.5rem;}}@media screen and (min-width:768px){.css-k3mtc7{font-size:1.5rem;}}@media screen and (min-width:1024px){.css-k3mtc7{font-size:1.5rem;}}</style><h3 class="css-k3mtc7">C 언어의 매크로</h3><p class="css-64lq4m">클로저의 매크로에 관해 알아보기 전에, 더 많은 분들이 알고 계실 C 언어의 매크로를 잠시 살펴봅시다.</p><div class="gatsby-highlight" data-language="c"><pre class="prism-code language-c" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><style data-emotion-css="apvfmm">.css-apvfmm{display:none;background-color:rgba(47,133,90,0.2);border:none;color:var(--theme-ui-colors-gray-2,#edf2f7);cursor:pointer;font-size:14px;font-family:"IBM Plex Sans",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";-webkit-letter-spacing:0.025rem;-moz-letter-spacing:0.025rem;-ms-letter-spacing:0.025rem;letter-spacing:0.025rem;-webkit-transition:default;transition:default;position:absolute;top:0;right:0;z-index:1;border-radius:0 0 0 0.25rem;padding:0.25rem 0.6rem;}@media screen and (min-width:640px){.css-apvfmm{font-size:14px;}}@media screen and (min-width:768px){.css-apvfmm{font-size:16px;}}.css-apvfmm[disabled]{cursor:not-allowed;}.css-apvfmm:not([disabled]):hover{background-color:var(--theme-ui-colors-primary,#2f855a);color:var(--theme-ui-colors-white,#fff);}</style><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<style data-emotion-css="1gy8470">.css-1gy8470{border:0;-webkit-clip:rect(0,0,0,0);clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;}</style><span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-c"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token macro property directive-hash" style="color:rgb(128, 203, 196)">#</span><span class="token macro property directive keyword" style="color:rgb(127, 219, 202)">include</span><span class="token macro property" style="color:rgb(128, 203, 196)"> </span><span class="token macro property string" style="color:rgb(173, 219, 103)">&lt;stdio.h&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain"></span><span class="token macro property directive-hash" style="color:rgb(128, 203, 196)">#</span><span class="token macro property directive keyword" style="color:rgb(127, 219, 202)">define</span><span class="token macro property" style="color:rgb(128, 203, 196)"> </span><span class="token macro property macro-name function" style="color:rgb(130, 170, 255)">CUBE_MACRO</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token macro property expression" style="color:rgb(128, 203, 196)">n</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token macro property expression" style="color:rgb(128, 203, 196)"> n</span><span class="token macro property expression operator" style="color:rgb(127, 219, 202)">*</span><span class="token macro property expression" style="color:rgb(128, 203, 196)">n</span><span class="token macro property expression operator" style="color:rgb(127, 219, 202)">*</span><span class="token macro property expression" style="color:rgb(128, 203, 196)">n</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;%d&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">CUBE_MACRO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token operator" style="color:rgb(127, 219, 202)">+</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 1+2*1+2*1+2 -&gt; 7</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></code></pre></div><p class="css-64lq4m">위 코드에서는 <code class="css-0">#define</code> 전처리 명령으로 n을 세제곱하는 <code class="css-0">CUBE_MACRO</code>라는 매크로 함수를 정의했습니다. <code class="css-0">CUBE_MACRO</code> 매크로는 일반 함수를 호출하는 것처럼 사용할 수 있습니다. 한편, 아래의 코드에서는 <code class="css-0">CUBE_MACRO</code> 매크로의 <code class="css-0">n*n*n</code>과 동일한 식을 일반 함수 <code class="css-0">cube_func()</code>로 정의했습니다.</p><div class="gatsby-highlight" data-language="c"><pre class="prism-code language-c" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-c"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token macro property directive-hash" style="color:rgb(128, 203, 196)">#</span><span class="token macro property directive keyword" style="color:rgb(127, 219, 202)">include</span><span class="token macro property" style="color:rgb(128, 203, 196)"> </span><span class="token macro property string" style="color:rgb(173, 219, 103)">&lt;stdio.h&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cube_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">int</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> n</span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain">n</span><span class="token operator" style="color:rgb(127, 219, 202)">*</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">main</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(173, 219, 103)">&quot;%d&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">cube_func</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token operator" style="color:rgb(127, 219, 202)">+</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 3*3*3 -&gt; 27</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11</span><span class="token plain">  </span><span class="token keyword" style="color:rgb(127, 219, 202)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></code></pre></div><p class="css-64lq4m">이 두 코드는 동일한 일을 하는 것 같지만, 결과 값이 다릅니다.<style data-emotion-css="h4jr85">.css-h4jr85{color:var(--theme-ui-colors-primary,#2f855a);-webkit-text-decoration:none;text-decoration:none;}.css-h4jr85:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="#ref-2" class="css-h4jr85">[2]</a><a href="#ref-3" class="css-h4jr85">[3]</a> <code class="css-0">CUBE_MACRO</code>는 <code class="css-0">7</code>이 출력되며, <code class="css-0">cube_func</code>는 <code class="css-0">27</code>이 출력되었습니다. C언어 매크로는 기호(여기서는 <code class="css-0">1+2</code>)를 다른 기호로 치환한 뒤, 코드를 컴파일하고 실행합니다. 함수는 이미 코드가 컴파일 된 상태에서, 기호를 값으로 평가한 후에(<code class="css-0">2+1 -&gt; 3</code>) 실행합니다. 컴파일 전에는 <code class="css-0">1+2</code>라는 코드가 <code class="css-0">3</code>이라는 값으로 평가되지 않으므로, <code class="css-0">n*n*n</code>은 <code class="css-0">3*3*3</code>이 아니라 <code class="css-0">1+2*1+2*1+2</code>로 치환됩니다. 따라서 매크로 함수와 일반 함수의 실행 결과에 차이가 생기는 것입니다. C 언어의 매크로는 이처럼 코드 자체를 변경하며, 이를 이용하면 제한적으로나마 기존 언어에서 정한 규칙의 선을 넘을 수 있습니다.</p><h2 class="css-1k3503y">클로저 매크로</h2><p class="css-64lq4m">클로저 매크로도 C언어 매크로와 비슷하지만, 단순히 문자열 치환이 아닙니다. 코드를 프로그래밍하는 것에 가깝습니다. 코드를 치환한다는 점에서 클로저의 매크로는 C언어 매크로와 비슷하지만, 리스프 계열 언어의 특징인 동형성으로 특별해집니다. <a href="#ref-4" class="css-h4jr85">[4]</a><a href="#ref-5" class="css-h4jr85">[5]</a><a href="#ref-6" class="css-h4jr85">[6]</a></p><h3 class="css-k3mtc7">동형성</h3><p class="css-64lq4m">클로저는 리스프 계열 언어입니다. 리스프(LISP)라는 이름은 &quot;리스트 처리(LISt Processing)&quot;에서 딴 것입니다. 그 이름에서도 짐작할 수 있듯이, 연결 리스트(linked list)가 리스트의 핵심 자료구조입니다. 심지어 코드 자체도 리스트로 구성할 정도이죠. 그래서 클로저에서는 코드가 리스트 자료구조와 같은 방식으로 표현·저장됩니다. 코드를 변경하는 것이 리스트를 변경하는 것과 똑같은 일입니다. 클로저에서는 소괄호 안에 요소들을 나열하는 방식으로 리스트를 표기합니다. 다음 두 코드는 각각 자바와 클로저로 리스트를 표현한 것입니다.</p><div class="gatsby-highlight" data-language="java"><pre class="prism-code language-java" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-java"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token class-name" style="color:rgb(255, 203, 139)">List</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">of</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></code></pre></div><div class="gatsby-highlight" data-language="clojure"><pre class="prism-code language-clojure" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-clojure"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">list</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; (1 2 3 4)</span></div></code></pre></div><p class="css-64lq4m">클로저에서는 식을 계산하거나 함수를 호출할 때 코드를 리스트로 작성합니다.</p><div class="gatsby-highlight" data-language="clojure"><pre class="prism-code language-clojure" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-clojure"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">/</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">println</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Hello, Clojure&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></code></pre></div><p class="css-64lq4m">함수 정의도 마찬가지입니다.</p><div class="gatsby-highlight" data-language="clojure"><pre class="prism-code language-clojure" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-clojure"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defn</span><span class="token plain"> hello-world </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="color:rgb(127, 219, 202)">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">println</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">str</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Hello, &quot;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defn</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">add1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> number</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></code></pre></div><p class="css-64lq4m">코드가 리스트 자료구조로 구성되어 있으므로, 코드를 다른 리스트를 조작할 때와 똑같이 조작할 수 있습니다.</p><div class="gatsby-highlight" data-language="clojure"><pre class="prism-code language-clojure" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-clojure"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">count</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">list</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; 4</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">first</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">list</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; *</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">list</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; (3 3 3)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">concat</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">list</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> &#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; (3 3 3 5)</span></div></code></pre></div><p class="css-64lq4m">클로저 코드는 소괄호를 적극적으로 활용하여 문법을 최소화하였습니다. 일반적으로 리스트의 첫 번째 요소를 연산자(함수)로, 나머지 요소들을 피연산자(인자)로 취급합니다. 동형성은 매크로를 사용할 때 아주 강력한 힘이 됩니다. 우리는 &#x27;코드를 생산하는 코드&#x27;를 만들 능력을 얻은 것입니다.</p><h2 class="css-1k3503y">클로저 매크로로 문법을 뛰어넘기</h2><style data-emotion-css="1iafhed">.css-1iafhed{border-left-color:#3BBD5A;border-left-style:solid;border-left-width:6px;margin-left:0;margin-right:0;padding-left:1rem;}.css-1iafhed p{font-style:italic;}</style><blockquote class="css-1iafhed"><p class="css-64lq4m">비아웹(Viaweb) 편집기의 전체 소스 코드 중 약 20%에서 25% 정도가 매크로였다. (중략) 그 프로그램에 포함된 모든 매크로는 꼭 필요해서 넣은 것이다. 이는 이 프로그램 중 최소 20%에서 25%가량의 코드는 다른 언어로는 하기 어려운 일을 하고 있음을 의미한다.</p><ul class="css-13z3j25"><li class="css-0">평균을 넘어서기, 폴 그레이엄(Paul Graham)</li></ul></blockquote><p class="css-64lq4m">다른 언어에서는 구현하기가 몹시 까다로운 문제들을, 클로저의 매크로를 이용하면 평상시의 코딩과 다름없이 간단히 처리할 수 있는 경우가 많습니다. 몇 가지 사례를 소개해 드리겠습니다. 자세한 문법 설명은 생략하겠습니다. 그저 이런 것이 가능하다는 것만 즐겨주시면 좋겠습니다.</p><h3 class="css-k3mtc7">매크로 맛보기</h3><p class="css-64lq4m">C언어 매크로 소개 예시와 비슷한 일을 하는 코드를 소개합니다.</p><div class="gatsby-highlight" data-language="clojure"><pre class="prism-code language-clojure" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-clojure"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; 매크로 정의</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defmacro</span><span class="token plain"> cube-macro </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">list</span><span class="token plain"> &#x27;* n n n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cube-macro </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; 27</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; 함수 정의</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defn</span><span class="token plain"> cube-fn </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> n n n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cube-fn </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; 27</span></div></code></pre></div><p class="css-64lq4m">C언어 매크로와는 다르게 함수 정의와 이질감이 없습니다. 그리고 결괏값이 함수 호출과 동일하게 나오는 것도 다릅니다.</p><h3 class="css-k3mtc7">예제 1 - anaphoric macro</h3><p class="css-64lq4m">anaphoric은 &#x27;앞서 나온 어구&#x27;를 지칭할 때 사용합니다. 대명사라고 이해하면 쉬울 것 같습니다. <a href="#ref-9" class="css-h4jr85">[9]</a> if문에서 검사한 값을 그대로 사용하고 싶지는 않으신가요? 자바를 예로 들면 <code class="css-0">null</code>을 관리하기 위해 종종 아래와 같은 코드를 만들 것입니다.</p><div class="gatsby-highlight" data-language="java"><pre class="prism-code language-java" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-java"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token class-name" style="color:rgb(255, 203, 139)">SomeObject</span><span class="token plain"> someObject </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">someMethod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arg1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> arg2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">someObject </span><span class="token operator" style="color:rgb(127, 219, 202)">!=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">doSomeThing</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">someObject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 또는</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 139)">Optional</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 139)">SomeObject</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> someObjectOption </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Optional</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ofNullable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">someMethod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arg1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> arg2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain"></span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(127, 219, 202)">!</span><span class="token plain">someObjectOption</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">isEmpty</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">doSomething</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">someObjectOption</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// 또는</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11</span><span class="token plain"></span><span class="token class-name" style="color:rgb(255, 203, 139)">Optional</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 139)">SomeObject</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> someObjectOption </span><span class="token operator" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 139)">Optional</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ofNullable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">someMethod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arg1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> arg2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12</span><span class="token plain">someObjectOption</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">ifPresent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">someObject </span><span class="token operator" style="color:rgb(127, 219, 202)">-&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">doSomething</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">someObject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></code></pre></div><p class="css-64lq4m">그렇다면 혹시 이런 것은 가능할까요? <code class="css-0">someMethod(arg1, arg2)</code> 의 결괏값이 <code class="css-0">null</code>이 아니라면 <code class="css-0">someMethod(arg1, arg2)</code>의 리턴문을 <code class="css-0">it</code>이라는 키워드로 직접 사용할 수는 없을까요? 가능한지는 차치하고 새로운 문법을 상상해봅시다. <code class="css-0">ifexists</code>는 값이 <code class="css-0">null</code>이거나 <code class="css-0">false</code>가 아니라면 중괄호 안의 statement를 수행한다고 상상해보죠.</p><div class="gatsby-highlight" data-language="java"><pre class="prism-code language-java" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-java"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token plain">ifexists </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">someMethod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">arg1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> arg2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">doSomething</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">// it을 someMethod의 리턴값에 바인딩이 가능할까?</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></code></pre></div><p class="css-64lq4m">이런 코드를 자바에서 만들 수 있을까요? 아뇨, 우리는 이런 코드를 만들 수 없습니다. 예약어들은 정해져있습니다. 우리가 마음대로 추가할 수 없지요. <code class="css-0">it</code>처럼 정의되지도 않은 이름을 바로 쓸 수도 없습니다. 누군가는 &#x27;당연히 정의부터 해야지. 순서라는 것이 있잖아.&#x27; 라고 생각할지도 모르죠. 하지만 클로저에서는 가능합니다. <code class="css-0">aif</code>, <code class="css-0">aand</code> 라는 매크로를 만들어 보겠습니다.(코드를 이해하실 필요는 없습니다. 가능하다는 것만 느껴주시면 좋겠습니다.)</p><div class="gatsby-highlight" data-language="clojure"><pre class="prism-code language-clojure" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-clojure"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defmacro</span><span class="token plain"> aif </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="color:rgb(127, 219, 202)">test</span><span class="token plain"> then else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain">  `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">~</span><span class="token operator" style="color:rgb(127, 219, 202)">&#x27;it</span><span class="token plain"> ~</span><span class="token keyword" style="color:rgb(127, 219, 202)">test</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> `</span><span class="token operator" style="color:rgb(127, 219, 202)">&#x27;it</span><span class="token plain"> ~then ~@else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defmacro</span><span class="token plain"> aand </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">&amp; body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">cond</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">nil?</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">nil?</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">first</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain">        </span><span class="token operator" style="color:rgb(127, 219, 202)">:else</span><span class="token plain"> `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">aif ~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">first</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9</span><span class="token plain">                    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">aand ~@</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">aif </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">inc</span><span class="token plain"> it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Nope&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; 2</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">aand </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">17</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">inc</span><span class="token plain"> it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">18</span><span class="token plain">  #</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">100</span><span class="token plain"> it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">19</span><span class="token plain">  #</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> %</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">20</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; true</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">21</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">22</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">aand </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">23</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">inc</span><span class="token plain"> it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">24</span><span class="token plain">  #</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">*</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> it</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">25</span><span class="token plain">  #</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token plain"> %</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">26</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; false</span></div></code></pre></div><p class="css-64lq4m"><code class="css-0">aif</code>는 첫번째 인자가 <code class="css-0">false</code>, <code class="css-0">nil</code>(자바의 <code class="css-0">null</code>과 비슷)이 아닌경우 <code class="css-0">it</code>에 바인딩되어 사용할 수 있습니다. <code class="css-0">aand</code>는 더 나아가서 함수들을 체이닝해서 수행할 수 있지요. <code class="css-0">it</code>은 이전 함수의 리턴값으로 체이닝됩니다.</p><h3 class="css-k3mtc7">예제 2 - for-loop문 만들기</h3><p class="css-64lq4m">Clojure에는 for-loop가 없습니다. 하지만 사용하고 싶다면 만들면 됩니다.<a href="#ref-10" class="css-h4jr85">[10]</a></p><div class="gatsby-highlight" data-language="clojure"><pre class="prism-code language-clojure" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-clojure"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defmacro</span><span class="token plain"> for-loop </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">sym init check change </span><span class="token operator" style="color:rgb(127, 219, 202)">:as</span><span class="token plain"> params</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> &amp; steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain"> `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">loop</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">~sym ~init value# </span><span class="token boolean" style="color:rgb(255, 88, 116)">nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> ~check</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">new-value# </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">do</span><span class="token plain"> ~@steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">recur</span><span class="token plain"> ~change new-value#</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain">      value#</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">for-loop </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">i </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">&lt;</span><span class="token plain"> i </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">inc</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">println</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></code></pre></div><p class="css-64lq4m">마치 새로운 문법이 추가된 것처럼 보이네요!</p><ul class="css-13z3j25"><li class="css-0">리스트의 첫번째 요소 이름을 두번째 요소의 값으로 정의</li><li class="css-0">리스트의 3번째 요소의 함수가 true 일때까지 재귀를 돈다.</li><li class="css-0">리스트의 4번째 요소는 첫번째 요소에 적용한 값으로 재귀호출한다.</li></ul><p class="css-64lq4m">이런 규칙을 단 6줄로 만들 수 있습니다.</p><h3 class="css-k3mtc7">예제 3 - 간단한 패턴매칭 만들기</h3><p class="css-64lq4m">위 예제는 매크로가 할 수 있는 일을 보여드리긴 했지만, 너무 작은 변화이기에 쓸모를 못 느낄 수도 있으신 분들을 위한 소개입니다. 클로저는 기본적으로 패턴매칭기능이 없습니다. 하지만 패턴매칭도 필요하면 만들 수 있습니다. 아래의 코드는 다음에 우리가 만들어볼 <code class="css-0">my-match</code>를 사용하는 예시입니다.<a href="#ref-11" class="css-h4jr85">[11]</a><a href="#ref-12" class="css-h4jr85">[12]</a><a href="#ref-14" class="css-h4jr85">[14]</a></p><div class="gatsby-highlight" data-language="clojure"><pre class="prism-code language-clojure" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-clojure"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">doseq</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">n </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">range</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">101</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">println</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">my-match </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mod n </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mod n </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain">             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">str</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;FizzBuzz&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain">             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> _</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">str</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Fizz&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain">             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">_ </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">str</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Buzz&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain">             </span><span class="token operator" style="color:rgb(127, 219, 202)">:else</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; 1 2 Fizz 4 Buzz Fizz 7 8 Fizz Buzz 11 Fizz 13 14 FizzBuzz ,,,</span></div></code></pre></div><p class="css-64lq4m">위 코드는 간단한 FizzBuzz 문제를 우리가 만들 <code class="css-0">my-match</code>를 사용하여 푼 모습입니다. 3의 배수이면 Fizz를 5의 배수이면 Buzz를 3의 배수이며 5의 배수는 FizzBuzz를 출력합니다. 그리고 아무런 배수가 아니면 해당 숫자를 출력합니다. 여기서 특이한 점은 <code class="css-0">_</code> 입니다. 이 값은 하스켈 패턴매칭의 와일드카드처럼 어떤 값이 와도 상관없도록 만듭니다.<a href="#ref-13" class="css-h4jr85">[13]</a> 그리고 심볼 바인딩도 가능하도록 할 것입니다. 아래 예제를 소개합니다.</p><div class="gatsby-highlight" data-language="clojure"><pre class="prism-code language-clojure" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-clojure"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">doseq</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">n </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">range</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">101</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">println</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">my-match </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mod n </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">mod n </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain">             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">str</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;FizzBuzz with n=&quot;</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain">             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">str</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Fizz with a=&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">a</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;, n=&quot;</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain">             </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">b</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">str</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;Buzz with b=&quot;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">b</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;, n=&quot;</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain">             </span><span class="token operator" style="color:rgb(127, 219, 202)">:else</span><span class="token plain"> n</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; 1</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; 2</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; Fizz with a=3, n=3</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; 4</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; Buzz with b=2, n=5</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13</span><span class="token plain"></span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; Fizz with a=1, n=6 ...</span></div></code></pre></div><p class="css-64lq4m">같은 FizzBuzz 문제이지만 이번에는 와일드카드 대신 심볼을 바인딩하였습니다. 각 심볼에 해당하는 값이 바인딩 됩니다. <code class="css-0">n</code>이 3의 배수일 때, 5의 mod 값을 <code class="css-0">a</code>에 바인딩하여 사용할 수 있게 됩니다.</p><p class="css-64lq4m">이를 구현한 코드는 아래와 같습니다. (굳이 이해하실 필요는 없습니다. 몇 개의 함수와 매크로로 매턴매칭이 가능하다는 것을 느끼시면 좋겠습니다.)</p><div class="gatsby-highlight" data-language="clojure"><pre class="prism-code language-clojure" style="color:#d6deeb;background-color:#011627" data-linenumber="true"><button type="button" name="copy code to clipboard" class="code-copy-button css-apvfmm">Copy<span aria-roledescription="status" class="css-1gy8470">copy code to clipboard</span></button><code class="language-clojure"><div class="token-line" style="color:#d6deeb"><span class="line-number-style">1</span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; https://gist.github.com/ssisksl77/4ea8f4945d52a054802e29a5b58337f8</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">2</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">ns</span><span class="token plain"> pattern-match.diy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">3</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">4</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defn</span><span class="token plain"> process-vars</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">5</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">vars</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">6</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">letfn </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">process-var </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">7</span><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">if-not</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">symbol?</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">8</span><span class="token plain">              </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">gensym</span><span class="token plain"> </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;ocr-&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">9</span><span class="token plain">              </span><span class="token keyword" style="color:rgb(127, 219, 202)">var</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">10</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">vec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">map</span><span class="token plain"> process-var vars</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">11</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">12</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defn</span><span class="token plain"> make-default-match </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">vars cs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">13</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">cs </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">partition </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"> cs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">14</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">p </span><span class="token number" style="color:rgb(247, 140, 108)">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">last</span><span class="token plain"> cs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; 심볼의 경우 p를 a에 바인딩하는 기능 추가 필요.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">15</span><span class="token plain">        last-match </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">vec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">repeat</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">count</span><span class="token plain"> vars</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> &#x27;_</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">16</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> p </span><span class="token operator" style="color:rgb(127, 219, 202)">:else</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">17</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">conj</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">vec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">butlast</span><span class="token plain"> cs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">last-match </span><span class="token number" style="color:rgb(247, 140, 108)">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">18</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">throw</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">RuntimeException. </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;last match must be :else&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">19</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">20</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defn</span><span class="token plain"> make-pattern-let-binding</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">21</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;let 바인딩을 위한 자료구조 생성&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">22</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">vs vars</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">23</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">interleave</span><span class="token plain"> vs vars</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">24</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">25</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defn</span><span class="token plain"> make-cond</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">26</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;cond predicate을 만들기 위한 비교문&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">27</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">vs cls</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">28</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">map</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">fn</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">v </span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">29</span><span class="token plain">         `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> ~v ~</span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> vs cls</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">30</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">31</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">def</span><span class="token plain"> backtrack-exception </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Exception. </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;BackTrack!&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">32</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">33</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defn</span><span class="token plain"> catch-error</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">34</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;예외를 잡는 자료구조 추가&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">35</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">&amp; body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">36</span><span class="token plain">  `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">catch Exception </span><span class="token number" style="color:rgb(247, 140, 108)">e</span><span class="token plain">#</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">37</span><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">identical?</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">e</span><span class="token plain"># ~</span><span class="token operator" style="color:rgb(127, 219, 202)">&#x27;backtrack-exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">38</span><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">do</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">39</span><span class="token plain">         ~@body</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">40</span><span class="token plain">       </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">throw</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">e</span><span class="token plain">#</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">41</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">42</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defn</span><span class="token plain"> compile-rec</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">43</span><span class="token plain">  </span><span class="token string" style="color:rgb(173, 219, 103)">&quot;재귀적으로 try문 안에 있는 비교문을 생성.&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">44</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">cnds return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">45</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">cnd </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">first</span><span class="token plain"> cnds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">46</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">v </span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">vec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> cnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; c가 심볼인 경우 v를 바인딩하도록 해야함.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">47</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">seq</span><span class="token plain"> cnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">48</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">cond</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">49</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">symbol?</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">50</span><span class="token plain">        `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">~</span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token plain"> ~v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">do</span><span class="token plain"> ~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">compile-rec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> cnds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">51</span><span class="token plain">        </span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">52</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> &#x27;_ </span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">53</span><span class="token plain">        `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">do</span><span class="token plain"> ~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">compile-rec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> cnds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">54</span><span class="token plain">        </span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">55</span><span class="token plain">        </span><span class="token operator" style="color:rgb(127, 219, 202)">:else</span><span class="token plain"> </span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">56</span><span class="token plain">        `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">do</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">cond</span><span class="token plain"> ~cnd ~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">compile-rec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> cnds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">57</span><span class="token plain">                   </span><span class="token operator" style="color:rgb(127, 219, 202)">:else</span><span class="token plain"> ~&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">throw</span><span class="token plain"> backtrack-exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">58</span><span class="token plain">      return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">59</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">60</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defn</span><span class="token plain"> match-compile</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">61</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">conds+return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">62</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">cnds return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">first</span><span class="token plain"> conds+return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">63</span><span class="token plain">        cnd </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">first</span><span class="token plain"> cnds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">64</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">v </span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">vec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> cnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token comment" style="color:rgb(99, 119, 119);font-style:italic">;; c가 심볼인 경우 v를 바인딩하도록 해야함.</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">65</span><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">seq</span><span class="token plain"> cnd</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">66</span><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">cond</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">67</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">symbol?</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">68</span><span class="token plain">        `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">~</span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token plain"> ~v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">69</span><span class="token plain">           </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">try</span><span class="token plain"> ~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">compile-rec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> cnds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">70</span><span class="token plain">             ~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">catch-error </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">match-compile </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> conds+return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">71</span><span class="token plain">        </span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">72</span><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">=</span><span class="token plain"> &#x27;_ </span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">73</span><span class="token plain">        `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">try</span><span class="token plain"> ~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">compile-rec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> cnds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">74</span><span class="token plain">           ~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">catch-error </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">match-compile </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> conds+return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">75</span><span class="token plain">        </span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">76</span><span class="token plain">        </span><span class="token operator" style="color:rgb(127, 219, 202)">:else</span><span class="token plain"> </span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">77</span><span class="token plain">        `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">cond</span><span class="token plain"> ~cnd ~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">compile-rec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> cnds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">78</span><span class="token plain">                    </span><span class="token operator" style="color:rgb(127, 219, 202)">:else</span><span class="token plain"> ~&#x27;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">throw</span><span class="token plain"> backtrack-exception</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">79</span><span class="token plain">           ~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">catch-error </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">match-compile </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">rest</span><span class="token plain"> conds+return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">80</span><span class="token plain">      return</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">81</span><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">82</span><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">defmacro</span><span class="token plain"> my-match</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">83</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">vars &amp; clauses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">84</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">vs </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">process-vars vars</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">85</span><span class="token plain">        cs </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">make-default-match vars clauses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">86</span><span class="token plain">        pattern-let-binding </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">vec </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">make-pattern-let-binding vs vars</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">87</span><span class="token plain">        conds </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">map</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">fn</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">make-cond vs </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">first</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">second</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> cs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">88</span><span class="token plain">    `</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="color:rgb(127, 219, 202)">let</span><span class="token plain"> ~pattern-let-binding</span></div><div class="token-line" style="color:#d6deeb"><span class="line-number-style">89</span><span class="token plain">       ~</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">match-compile conds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span></div></code></pre></div><p class="css-64lq4m">기존 함수 정의 및 호출과 동일한 형태의 코드임을 알 수 있습니다. 생성하는 결괏값이 소스 코드인 것만 다릅니다. </p><p class="css-64lq4m">만약에 여러분이 사용하는 언어에서 패턴매칭이 없을 때, 여러분은 임의로 이 기능을 추가할 수 있으신가요 아니면 새로운 버전이 나오기를 기다리실 수밖에 없으신가요? 리스프의 매크로라면 여러분이 원하는 것을 무엇이든 손쉽게 만들 수 있습니다. 여러분은 문법에 구애받지 않고 상상하는 데로만 작성할 힘을 갖게 됩니다. <a href="#ref-7" class="css-h4jr85">[7]</a><a href="#ref-8" class="css-h4jr85">[8]</a></p><p class="css-64lq4m">언어가 여러분을 제약하지 않도록 하세요. 여러분이 언어를 제약하세요.</p><h2 class="css-1k3503y">참고문헌</h2><ol class="css-13z3j25"><li class="css-0">언어는 어떻게 생각하는 방식을 형성하는가<ul class="css-13z3j25"><li class="css-0">[1]<!-- --> : <a href="https://www.ted.com/talks/lera_boroditsky_how_language_shapes_the_way_we_think" class="css-h4jr85">how language shapes the way we think</a> <a name="ref-1" class="css-h4jr85"></a></li></ul></li><li class="css-0">C 언어 매크로<ul class="css-13z3j25"><li class="css-0">[2]<!-- --> : <a href="https://www.geeksforgeeks.org/macros-vs-functions/" class="css-h4jr85">https://www.geeksforgeeks.org/macros-vs-functions/</a> <a name="ref-2" class="css-h4jr85"></a></li><li class="css-0">[3]<!-- --> : <a href="https://stackoverflow.com/questions/9104568/macro-vs-function-in-c" class="css-h4jr85">https://stackoverflow.com/questions/9104568/macro-vs-function-in-c</a> <a name="ref-3" class="css-h4jr85"></a></li></ul></li><li class="css-0">리스프의 이상한 문법<ul class="css-13z3j25"><li class="css-0">[4]<!-- --> : <a href="http://www.paulgraham.com/weird.html" class="css-h4jr85">http://www.paulgraham.com/weird.html</a> <a name="ref-4" class="css-h4jr85"></a></li><li class="css-0">[5]<!-- --> : <a href="https://www.defmacro.org/ramblings/lisp.html" class="css-h4jr85">https://www.defmacro.org/ramblings/lisp.html</a> <a name="ref-5" class="css-h4jr85"></a></li><li class="css-0">[6]<!-- --> : <a href="https://helloworld.kurly.com/blog/y-combinator/" class="css-h4jr85">https://helloworld.kurly.com/blog/y-combinator/</a> <a name="ref-6" class="css-h4jr85"></a></li></ul></li><li class="css-0">리스프 매크로에 대한 논의<ul class="css-13z3j25"><li class="css-0">[7]<!-- --> : <a href="http://lists.warhead.org.uk/pipermail/iwe/2005-July/000130.html" class="css-h4jr85">http://lists.warhead.org.uk/pipermail/iwe/2005-July/000130.html</a> <a name="ref-7" class="css-h4jr85"></a></li><li class="css-0">[8]<!-- --> : <a href="https://arxiv.org/pdf/1608.02621.pdf" class="css-h4jr85">https://arxiv.org/pdf/1608.02621.pdf</a> <a name="ref-8" class="css-h4jr85"></a></li></ul></li><li class="css-0">anaphoric macro<ul class="css-13z3j25"><li class="css-0">[9]<!-- --> : <a href="http://www.paulgraham.com/onlisptext.html" class="css-h4jr85">onlisp p.189</a> <a name="ref-9" class="css-h4jr85"></a></li></ul></li><li class="css-0">for-loop<ul class="css-13z3j25"><li class="css-0"><a href="https://stackoverflow.com/questions/9981943/how-to-implement-a-for-loop-in-clojure" class="css-h4jr85">https://stackoverflow.com/questions/9981943/how-to-implement-a-for-loop-in-clojure</a> <a name="ref-10" class="css-h4jr85"></a></li></ul></li><li class="css-0">패턴매칭<ul class="css-13z3j25"><li class="css-0">패턴매칭 알고리즘 소개 : <a href="https://www.ccs.neu.edu/~types/resources/a-fpca-1985.pdf" class="css-h4jr85">https://www.ccs.neu.edu/~types/resources/a-fpca-1985.pdf</a> <a name="ref-11" class="css-h4jr85"></a></li><li class="css-0">clojure core.match 라이브러리 : <a href="https://github.com/clojure/core.match" class="css-h4jr85">https://github.com/clojure/core.match</a> <a name="ref-12" class="css-h4jr85"></a></li><li class="css-0">하스켈 wildcard 설명 : <a href="https://www.haskell.org/tutorial/patterns.html" class="css-h4jr85">https://www.haskell.org/tutorial/patterns.html</a> <a name="ref-13" class="css-h4jr85"></a></li><li class="css-0">직접 구현한 패턴매칭 소스코드 링크 : <a href="https://gist.github.com/ssisksl77/4ea8f4945d52a054802e29a5b58337f8" class="css-h4jr85">https://gist.github.com/ssisksl77/4ea8f4945d52a054802e29a5b58337f8</a> <a name="ref-14" class="css-h4jr85"></a></li></ul></li></ol><br/><br/><style data-emotion-css="13l3oqy">.css-13l3oqy{background-color:var(--theme-ui-colors-muted,#e2e8f0);border:0;height:1px;margin:1rem;margin-left:0;margin-right:0;}</style><hr class="css-13l3oqy"/><br/><div style="display:flex;align-items:center"><img alt="Gravatar for ssisksl77@gmail.com" style="border-radius:25px;margin-right:8px" src="//www.gravatar.com/avatar/cf05558ac435407b6ea7a57aa8538fe7?d=retro&amp;r=g&amp;s=50" srcSet="//www.gravatar.com/avatar/cf05558ac435407b6ea7a57aa8538fe7?d=retro&amp;r=g&amp;s=100 2x" height="50" width="50" class="react-gravatar"/><div><p style="margin-bottom:-4px"><b>남영환</b></p><p style="margin-top:-4px">백엔드 개발자</p></div></div></section></div><style data-emotion-css="6x8z6y">.css-6x8z6y{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;margin-top:8rem;color:var(--theme-ui-colors-secondary,#5f6c80);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide,#cbd5e0);padding-top:1rem;}.css-6x8z6y a{color:var(--theme-ui-colors-secondary,#5f6c80);-webkit-text-decoration:none;text-decoration:none;}.css-6x8z6y a:hover{color:var(--theme-ui-colors-heading,#000);-webkit-text-decoration:underline;text-decoration:underline;}.css-6x8z6y a:focus{color:var(--theme-ui-colors-heading,#000);}@media screen and (min-width:640px){.css-6x8z6y{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media screen and (min-width:768px){.css-6x8z6y{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><footer class="css-6x8z6y"><div>© <!-- -->2021<!-- --> by <!-- -->그린랩스<!-- -->. All rights reserved.</div><div><style data-emotion-css="zs3bie">.css-zs3bie{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary,#2f855a);-webkit-text-decoration:none;text-decoration:none;}.css-zs3bie:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a aria-label="Link to the theme&#x27;s GitHub repository" href="https://www.notion.so/greenlabs/a54bc92ea17b4d97b1c7366e997f5932" target="_blank" class="css-zs3bie">🍅 진행중인 채용</a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-FE2V3HW55M"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-FE2V3HW55M', {"send_page_view":false});
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/the-macro";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-7ced8295869eb983463c.js"],"app":["/app-6eb8c76412b9441ee715.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-0f40d706ebc58d78c1f6.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-7eb84e497c456181d7fa.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx-8e9165e91ed5c4d689c6.js"],"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx":["/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx-156c1b71d9f01ae520cb.js"],"component---src-lekoarts-gatsby-theme-minimal-blog-core-templates-blog-query-tsx":["/component---src-lekoarts-gatsby-theme-minimal-blog-core-templates-blog-query-tsx-8b1a3edd4df186029468.js"],"component---src-lekoarts-gatsby-theme-minimal-blog-core-templates-homepage-query-tsx":["/component---src-lekoarts-gatsby-theme-minimal-blog-core-templates-homepage-query-tsx-25171962746b08aa2dac.js"],"component---src-lekoarts-gatsby-theme-minimal-blog-core-templates-post-query-tsx":["/component---src-lekoarts-gatsby-theme-minimal-blog-core-templates-post-query-tsx-91bb4cd3b6293ecc9d55.js"]};/*]]>*/</script><script src="/polyfill-7ced8295869eb983463c.js" nomodule=""></script><script src="/component---src-lekoarts-gatsby-theme-minimal-blog-core-templates-post-query-tsx-91bb4cd3b6293ecc9d55.js" async=""></script><script src="/a762775feeb6986a7626165c092554dd56475b59-fe7bde6fd61e84b9dfa4.js" async=""></script><script src="/styles-e9d24b1846c7d6eb9685.js" async=""></script><script src="/app-6eb8c76412b9441ee715.js" async=""></script><script src="/framework-cd3e1e804d552fa282ef.js" async=""></script><script src="/webpack-runtime-14c9fe1a26c0af28d845.js" async=""></script></body></html>